# JPA

자바 애플리케이션에 관계형 데이터베이스를 사용하는 방식을 정의한 인터페이스(라이브러리 x)<br>
JPA는 단순히 명세이기 떄문에 구현이 없다. 대부분 Interface, Enum, Exception, Annotation으로 이루어져 있다.

- 직접적인 SQL문을 사용하지 않고 자바 코드를 사용해서 DB에 접근하고 조작할 수 있는 기술이다

## 장단점

### 장점

1. 객체 지향적으로 데이터를 관리할 수 있기 떄문에 비즈니스 로직에 집중 할 수 있다.
2. 데이터 생성, 변경, 관리가 쉽다.
3. 로직을 쿼리에 집중하기 보다는 객체 자체에 집중할 수 있다.
4. 빠른 개발이 가능하다.

### 단점

1. 잘 이해하고 사용하지 않으면 데이터 손실이 일어날 수 있다.
2. 성능상 문제가 있을 수도 있다

- @EnableJpaRepositories: JpaRepository에 대한 설정 정보를 자동적으로 로딩하고 Repository 빈을 등록하는 역할을 한다

- Entity: JPA가 관리하는 클래스로, 해당 클래스를 Entity라고 부른다
  - 테이블에 대응하는 하나의 클래스
  - JPA를 사용하여 테이블과 매핑해야할 클래스는 반드시 @Entity를 선언해야 한다
- 특징
  - public, protected이여야 한다
  - JPA 스팩으로 규정되어 있다

## N to M

### One to One

일대일 관계

- 주 테이블이나 대상 테이블 중에 외래키를 넣을 테이블을 선택 가능하다
  - 주 테이블에 외래 키 저장
  - 대상 테이블에 외래 키 저장
- 외래 키에 데이터베이스 유니크 제약조건이 추가되야 일대일 관계가 된다

- 주 테이블에 외래키
  - 주 테이블만 조회해도 대상 테이블에 데이터가 있는지 확인 가능 하다
  - 값이 없으면 외래 키에 NULL을 허용해야 한다.
    - DB에 치명적일 수 있다.
- 대싱 테이블에 외래키
  - 일대일에서 일대다 관계로 변경할 때 테이블 구조를 유지할 수 있다.
  - 코드 상에서 멤버 Entity에서 Locker를 많이 엑세스 하는데 강제로 양방향 매핑을 해야 한다.
  - 기본 프록시 기능의 한계도 Lazy 로딩으로 설정해도 Eager 로딩이 된다
