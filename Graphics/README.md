# 그래픽스

컴퓨터를 이용해 실제 세계의 영상을 조작하거나 새로운 영상을 만들어 내는 기술

## 그래픽스 출력 기본 객체

1. 점
2. 직선
3. 다각형

- 다각형은 앞면과 뒷면으로 구분이 된다.
- 다각형의 정점의 나열 순서를 오른손으로 감을 때, 엄지 손가락의 방향이 법선
- 법선 벡터는 다각형의 앞면을 지시한다.

  - 반시계 방향으로 돌게 되면 앞면을 의미한다

- 그 외의 복잡한 도형은 기본 객체의 조합으로 이루어진다.

### 레스터화

기본 객체를 정수 좌표를 갖는 스크린(칼라버퍼, 프레임버퍼)에 그리는 과정

- 기본 객체위에 모든 점을 정수 좌표를 갖는 가까운 픽셀의 좌표로 반올림되어야 함
- 3차원 장면은 다양하고 많은 수의 그래픽스 출력 객체를 포함

### Line Drawing Algorithm

1. 직선이 통과하는 모든 픽셀을 그린다
   - 모든 점이 나와야 되므로 비효율 적이다.
2. Bresenham(MidPoint) 알고리즘
   - 기울기를 (0 < m < 1)으로 가정하고 x 좌표를 1씩 증가
   - 현재 위치 (Xk, Yk), 다음 위치는 (Xk + 1, Yk) 혹은 (Xk + 1, Yk + 1)을 선택해서 그리게 된다
   - 이때 y = mx + b의 음 함수를 표현한다 (f(x, y) = mx - y + b)
   - f(Xk + 1, Yk + 0.5) <= 0 이면 (Xk + 1, Yk)
   - f(Xk + 1, Yk + 0.5) > 0 이면 (Xk + 1, Yk + 1)

## 그래픽스 기본 설정

1. 블렌딩

2. 블렌딩 상수 지정

- (Red, Green, Blue, Aplha)

### 스캔라인 다각형 채우기

모니터에서 한줄 한줄 채워 나가는 것

1. 모든 다각형 Edge과 ScaeLine과의 교차점 계산
2. 교차점의 왼쪽에서 오른쪽으로 정렬
3. 2개의 교차점으로 구성되는 인터벌을 지정된 색상으로 채움

- 교차점이 4개 인 경우
  - 1~2 -> 내부
  - 2~3 -> 외부
  - 3~4 -> 내부
- 교차점이 3개인 경우
  - 전부 내부로 판단(2 == 3으로 판단하여 2~3 외부가 없어짐)
  - 모든 Edge를 반시계 방향으로 순회
  - 만약 교차점에서 y좌표가 단조 증가한다면 1개, 아니면 2개의 교차점으로 취급

### 경계 채우기

- 내부 픽셀에서 시작하여, 재귀적으로 이웃 픽셀을 조사
- 현재 픽셀이 내부 픽셀이면 지정된 색을 채운다.
- 4-Connected 와 8-Connected으로 대각선을 구별해서 넣을 수 있다.

### 레스터화에서 엘리어싱

- 레스터화에 의해 생성되는 계단 현상

1. 픽셀의 강도를 조정
2. Super-Sampling
   - 각 픽셀을 9개의 부분 픽셀로 분할
   - 각 부분 픽셀에서 강도를 계산하여 강도를 결정
   - 레벨에 따라 픽셀 강도를 조정
3. Area Sampling
   - 각 픽셀의 중첩 영역의 넓이에 비례하여 할당
   - 선의 두계를 둔 다음에 넓이를 구한다

## 기하 변환

### 어파인 공간

- 점: p, q, r
- 벡터 u(->)으로 구성이 되어 있다.

- 점 + 벡터 = 점, 점 - 점 = 벡터
- 어파인 공간에서 점은 벡터와 구별된다

### 벡터의 연산

- 벡터의 상수 배 - 방향은 변하지 않는다
- 두 백터의 합과 차

### 점의 연산

- 점 - 점 = 벡터
- 점 + 벡터 = 점
- 점 + 점 = 정의되지 않는다

### 어파인 결합

점 끼리 더할 수 있다.

- 단 계수들의 합이 1이거나 0일 때 어파인 결합이 성립된다
- 1이라면 점이 되고 0이면 벡터가 된다

### 어파인 프레임

n 차원 어파인 공간에서 어파인 프레임은 다음으로 정이 된다

- 원점 0
- n개의 축 벡터

### 동차 좌표

- 어파인 공간에서 벡터와 점은 동차 좌표로 표현된다

- [x, y, z, 0] -> 시작 위치가 중요하지 않는 벡터
- [x, y, z, 1] -> 원점부터 시작하는 의미의 점

### 어파인 변환

- 어파인 결합을 보존하는 변환 T를 어파인 변환이라고 한다
- 어파인 변환T은 동차 행렬로 표현된다.

1. 이동
   - n번째 이동 위치를 적게 된다.
   - EX) 2차원
     - (1 0 x)
     - (0 1 y)
     - (0 0 1)
     - x, y 만큼 움직이게 된다
2. 회전 변환
   - 원점을 기준으로 반시계 방향으로 회전한다
   - EX) 2차원
     - (cos -sin 0)
     - (sin cos 0)
     - ( 0 0 1)
   - 원점을 기준으로 회전하는 것이므로 특정 기점으로 변환하기 위해서는 원점 이동 후 변환 해야 한다
   - 회전 행렬의 성질
   - 각 행(열) 벡터의 길이가 1
   - 각 행(열) 백터는 수직
   - 즉, 회전 행렬은 직교 행렬이고 역행렬은 전치 행렬이다
3. 스케일 변환
   - 원점에 대한 스케일이 변환된다.
   - EX) 2차원
     - (x 0 0)
     - (0 y 0)
     - (0 0 1)
     - x축 방향으로 x, y축 방향으로 y만큼 늘어난다
4. 밀림 변환

- 특정 위치에서 회전하기 위해서는

1. 원점으로 이동
2. 회전 변환
3. 원래의 저믕로 이동

- 반드시 3가지 순서대로 진행을 해야 한다

## 관측 파이프 라인

3차원 장면에서 투영된 2차원 좌표를 계산하는 과정

1. MC(Model Coordinate): 모델 좌표계
2. WC(World Coordinate): 월드 좌표계
3. VC(View Coordinate): 관측 좌표계
4. NC(Normalized Coordinate): 정규 좌표계
5. DC(Device Coordinate): 장치 좌표계

### 모델링 변환

MC에서 WC로 변환

### 관측 변환

VC에서 WC로 변환

M(Modelview) = M(Viewing)M(Modeling)

1. WC에서 표현된 VC의 원점 좌표
2. WC에서 표현된 VC가 바라보는 참조점
3. WC에서 표현된 VC의 상향(y축) 벡터

### 투영 변환

3차원 장면에서 2차원 이미지 생성하는 변환

1. 평행(Parallel)/직교(Orthogonal) 투영
   - 투영선이 관측 평면에 직교
   - VC에서 3D 직육면체 형태의 관측 공간을 정의
   - 정의된 관측 공간은 정규화 관측 공간으로 변환 됨
2. 원근(Perspective) 투영
   - 잘려진 피라미트 모양으로 거리에 따라 축소되는 비율이 다르다
